
    var expcurricular = [
    {
        ciclo: 1,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 1,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 1,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 1,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 1,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 2,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 2,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 2,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 2,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 2,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 3,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 3,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 3,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 3,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 3,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 4,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 4,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 4,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 4,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 4,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 5,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 5,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 5,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 5,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    {
        ciclo: 5,
        expcurricular: 'CONTABILIDAD FINANCIERA',
        horas: 4,
        alumnos : 120   ,
        aulaCapacidad : 40,
        seccionEstimada : 3,
        seccionManana : 1,
        seccionTarde : 2,
        seccionNoche : 0,
    },
    ];
function registro(){
   var filial = document.getElementById('ddlFilial');
   filial = filial.options[filial.selectedIndex].text;
    
   var tipoPlan = document.getElementById('ddlTipoPlan');
   tipoPlan = tipoPlan.options[tipoPlan.selectedIndex].text;
    
   var escuela = document.getElementById('ddlEscuelas');
   escuela = escuela.options[escuela.selectedIndex].text;
    
   var plan = document.getElementById('ddlPlan');
   plan = plan.options[plan.selectedIndex].text;
    
   var sede = document.getElementById('ddlSede');
   sede = sede.options[sede.selectedIndex].text;
    
   var periodo = document.getElementById('ddlPeriodo');
   periodo = periodo.options[periodo.selectedIndex].text;
    
    var elements = document.querySelectorAll(".resultTable td");
        
    elements[0].innerHTML = filial;
    elements[1].innerHTML = plan;
    elements[2].innerHTML = escuela;
    elements[3].innerHTML = periodo;
 
    var frmRegistro = document.getElementById('frmRegistro');
    frmRegistro.classList.add('hide');
    var tbLista = document.getElementById('tbLista');
    tbLista.classList.remove('hide');
    tbLista.classList.remove('col-md-6');
    tbLista.classList.add('col-md-7');
    
    var tableData = document.getElementById('tableData');
    console.log(tableData);
    tableData.innerHTML = '';
    for(var i = 0; i < expcurricular.length ; i++){
        //table.innerHTML
        var fila = '<tr class="col-input" onclick="mostrarGrupos('+i+')">'+
                              '<td class="text-center">'+expcurricular[i].ciclo+'</td>'+
                              '<td>'+expcurricular[i].expcurricular+'</td>'+
                              '<td class="text-center">'+expcurricular[i].horas+'</td>'+
                              '<td class="text-center">'+expcurricular[i].alumnos+'</td>'+
                              '<td>'+
                                '<input type="text" class="form-control" onkeyup="actualizarCapacidad(this,'+i+')" value="'+
                                    expcurricular[i].aulaCapacidad+
                                '">'+
                              '</td>'+
                              '<td class="text-center">'+expcurricular[i].seccionEstimada+'</td>'+
                              '<td>'+
                                '<input type="text" class="form-control" onkeyup="sumaSecciones(this,'+i+',1)" value="'+
                                    expcurricular[i].seccionManana+
                                '">'+
                               '</td>'+
                              '<td>'+
                                '<input type="text" class="form-control" onkeyup="sumaSecciones(this,'+i+',2)" value="'+
                                    expcurricular[i].seccionTarde+
                                '">'+
                              '</td>'+
                              '<td>'+
                                '<input type="text" class="form-control" onkeyup="sumaSecciones(this,'+i+',3)" value="'+
                                    expcurricular[i].seccionNoche+
                                '">'+
                              '</td>'+
                            '</tr>';
        tableData.innerHTML += fila;
    }
}

function mostrarGrupos(pos){
    var frmGrupos = document.getElementById('frmGrupos');   
    frmGrupos.classList.remove('hide');
    var fila = expcurricular[pos];
    var element = document.querySelector('#frmGrupos .tabs-v');
    element.innerHTML = '';
    for(var i = 0; i < fila.seccionEstimada; i++){
        if(i == 0){
            var text = ' class="active"';
        }else{
            text= '';
        }
        element.innerHTML+= '<li'+ text +'><a href="#">Sección'+ (i+1) +'</a></li>';   
    }
    
}

function sumaSecciones(ref, pos,option){
    var secciones = expcurricular[pos].seccionEstimada;
    var seccionManana = 0;
    var seccionTarde = 0;
    var seccionNoche = 0;
    switch(option){
        case 1:
            seccionManana = parseInt(document.querySelectorAll('#tableData tr')[pos].querySelectorAll('input')[1].value);
            seccionTarde = expcurricular[pos].seccionTarde;
            seccionNoche = expcurricular[pos].seccionNoche;
            expcurricular[pos].seccionManana = seccionManana;
            break;
        case 2:
            seccionManana = expcurricular[pos].seccionManana;
            seccionTarde = parseInt(document.querySelectorAll('#tableData tr')[pos].querySelectorAll('input')[2].value);
            seccionNoche = expcurricular[pos].seccionNoche;
            expcurricular[pos].seccionTarde = seccionTarde;
            break;
        case 3:
            seccionManana = expcurricular[pos].seccionManana;
            seccionTarde = expcurricular[pos].seccionTarde;
            seccionNoche = parseInt(document.querySelectorAll('#tableData tr')[pos].querySelectorAll('input')[3].value);
            expcurricular[pos].seccionNoche = seccionNoche;
            break;
    }
    console.log(seccionManana,seccionTarde,seccionNoche,secciones)
    if(seccionManana + seccionTarde + seccionNoche == secciones){
        document.querySelectorAll('#tableData tr')[pos].querySelectorAll('input')[1].classList.remove('error');
        document.querySelectorAll('#tableData tr')[pos].querySelectorAll('input')[2].classList.remove('error');
        document.querySelectorAll('#tableData tr')[pos].querySelectorAll('input')[3].classList.remove('error');
    }else{
        document.querySelectorAll('#tableData tr')[pos].querySelectorAll('input')[1].classList.add('error');
        document.querySelectorAll('#tableData tr')[pos].querySelectorAll('input')[2].classList.add('error');
        document.querySelectorAll('#tableData tr')[pos].querySelectorAll('input')[3].classList.add('error');
    }
}

function actualizarCapacidad(ref,pos){
    console.log(ref.value)
    if(ref.value>9){
        var secciones = Math.round(expcurricular[pos].alumnos / ref.value);
        if(expcurricular[pos].seccionEstimada != secciones){
            expcurricular[pos].seccionEstimada = secciones;
            document.querySelectorAll('#tableData tr')[pos].querySelectorAll('td')[5].innerHTML = secciones;
            document.querySelectorAll('#tableData tr')[pos].querySelectorAll('input')[1].classList.add('error');
            document.querySelectorAll('#tableData tr')[pos].querySelectorAll('input')[2].classList.add('error');
            document.querySelectorAll('#tableData tr')[pos].querySelectorAll('input')[3].classList.add('error');
            ref.classList.remove('error');
        }
    }else{
        ref.classList.add('error');
        
        /*var msg = document.createElement('span');
        msg.innerHTML = 'Debe incluir numeros mayor a 9';
        console.log(ref.parent)*/
    }
}

(function(){
})();